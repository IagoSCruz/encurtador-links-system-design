# postgresql.conf — configurações do primário para streaming replication
listen_addresses = '*'
hba_file = '/etc/postgresql/pg_hba.conf'

# Nível mínimo de WAL necessário para replicação
wal_level = replica

# Máximo de réplicas simultâneas (3 réplicas)
max_wal_senders = 5
max_replication_slots = 5

# Mantém WAL suficiente para réplicas que ficarem offline brevemente
wal_keep_size = 128MB

# Habilita feedback das réplicas para evitar perda de dados
hot_standby_feedback = on

# Performance
shared_buffers = 256MB
effective_cache_size = 1GB
checkpoint_completion_target = 0.9
synchronous_commit = on
